{"failedCount":0,"prefixedPath":"classpath:drivetecTestCases\/features\/pdfdownload.feature","packageQualifiedName":"drivetecTestCases.features.pdfdownload","loopIndex":-1,"relativePath":"drivetecTestCases\/features\/pdfdownload.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":456200,"startTime":1732283430255,"endTime":1732283430255,"millis":0.4562,"status":"passed"},"step":{"line":7,"prefix":"Given","index":0,"text":"url apiUrl + '\/api\/Drives\/DownloadPDFNew\/Schuco'"},"stepLog":"19:20:30.255 karate.env system property was: null \n"},{"result":{"nanos":179900,"startTime":1732283430255,"endTime":1732283430255,"millis":0.1799,"status":"passed"},"step":{"line":8,"prefix":"And","index":1,"text":"header Content-Type = 'application\/json'"}},{"result":{"nanos":451100,"startTime":1732283430255,"endTime":1732283430255,"millis":0.4511,"status":"passed"},"step":{"endLine":28,"line":9,"prefix":"And","docString":"[\n  {\"Id\":\"configId\",\"Header\":\"configId\",\"Value\":\"0413f204-c057-427c-9439-44091f1470d0\"},\n  {\"Id\":\"driveId\",\"Header\":\"driveId\",\"Value\":\"8e41b236-ddae-4821-9147-db4ac85f1b97\"},\n  {\"Id\":\"culture\",\"Header\":\"culture\",\"Value\":\"EN-US\"},\n  {\"Id\":\"projectId\",\"Header\":\"projectId\",\"Value\":\"9103b22a-d525-4b79-938c-4e0260bce013\"},\n  {\"Id\":\"range-of-app\",\"Header\":\"Range of application\",\"Value\":\"Façade\"},\n  {\"Id\":\"opening-type\",\"Header\":\"Opening type\",\"Value\":\"Bottom-hung vent\"},\n  {\"Id\":\"opening-direction\",\"Header\":\"Opening direction\",\"Value\":\"Inward\"},\n  {\"Id\":\"how-calc-weight\",\"Header\":\"Vent weight\",\"Value\":\"Weight including glass\"},\n  {\"Id\":\"Chain-Length\",\"Header\":\"Chain- \/ connecting rod handle\",\"Value\":\"100%\"},\n  {\"Id\":\"drive-position\",\"Header\":\"Drive position\",\"Value\":\"Side installation\"},\n  {\"Id\":\"locking-mechanism\",\"Header\":\"Locking mechanism\",\"Value\":\"With\"},\n  {\"Id\":\"voltage\",\"Header\":\"Voltage\",\"Value\":\"24 V\"},\n  {\"Id\":\"drive-type\",\"Header\":\"Drive type\",\"Value\":\"Chain drive\"},\n  {\"Id\":\"type-installation\",\"Header\":\"Type of installation\",\"Value\":\"Pivoting Outer Frame Installation\"},\n  {\"Id\":\"calculation-type-for-ventilation-area\",\"Header\":\"Calculation type for ventilation area\",\"Value\":\"Method under consideration of the reveal\"}\n]","index":2,"text":"request"}},{"result":{"nanos":4313190500,"startTime":1732283430255,"endTime":1732283434568,"millis":4313.1905,"status":"passed"},"step":{"line":29,"prefix":"When","index":3,"text":"method POST"},"stepLog":"19:20:30.255 request:\n1 > POST https:\/\/dev-drivetec-apis.schuecodigitalsolutions.com\/api\/Drives\/DownloadPDFNew\/Schuco\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1201\n1 > Host: dev-drivetec-apis.schuecodigitalsolutions.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n[{\"Id\":\"configId\",\"Header\":\"configId\",\"Value\":\"0413f204-c057-427c-9439-44091f1470d0\"},{\"Id\":\"driveId\",\"Header\":\"driveId\",\"Value\":\"8e41b236-ddae-4821-9147-db4ac85f1b97\"},{\"Id\":\"culture\",\"Header\":\"culture\",\"Value\":\"EN-US\"},{\"Id\":\"projectId\",\"Header\":\"projectId\",\"Value\":\"9103b22a-d525-4b79-938c-4e0260bce013\"},{\"Id\":\"range-of-app\",\"Header\":\"Range of application\",\"Value\":\"Façade\"},{\"Id\":\"opening-type\",\"Header\":\"Opening type\",\"Value\":\"Bottom-hung vent\"},{\"Id\":\"opening-direction\",\"Header\":\"Opening direction\",\"Value\":\"Inward\"},{\"Id\":\"how-calc-weight\",\"Header\":\"Vent weight\",\"Value\":\"Weight including glass\"},{\"Id\":\"Chain-Length\",\"Header\":\"Chain- \\\/ connecting rod handle\",\"Value\":\"100%\"},{\"Id\":\"drive-position\",\"Header\":\"Drive position\",\"Value\":\"Side installation\"},{\"Id\":\"locking-mechanism\",\"Header\":\"Locking mechanism\",\"Value\":\"With\"},{\"Id\":\"voltage\",\"Header\":\"Voltage\",\"Value\":\"24 V\"},{\"Id\":\"drive-type\",\"Header\":\"Drive type\",\"Value\":\"Chain drive\"},{\"Id\":\"type-installation\",\"Header\":\"Type of installation\",\"Value\":\"Pivoting Outer Frame Installation\"},{\"Id\":\"calculation-type-for-ventilation-area\",\"Header\":\"Calculation type for ventilation area\",\"Value\":\"Method under consideration of the reveal\"}]\n\n19:20:34.563 response time in milliseconds: 4308\n1 < 200\n1 < Content-Type: application\/json; charset=utf-8\n1 < Date: Fri, 22 Nov 2024 13:50:35 GMT\n1 < Server: Microsoft-IIS\/10.0\n1 < X-Powered-By: ASP.NET\n1 < Content-Length: 276\n1 < Connection: keep-alive\n{\r\n  \"result\": \"https:\/\/drive-tec-dev.s3.amazonaws.com\/new_project-Chain_actuator_D2_L800.pdf?AWSAccessKeyId=AKIAZAWIART4ZFAXXPHK&Expires=1732287035&response-content-disposition=attachment%3B&response-content-type=application%2Fpdf&Signature=LOMTooVS6po6YveV6DqKUKlyvN8%3D\"\r\n}\n\n"},{"result":{"nanos":4000,"startTime":1732283434563,"endTime":1732283434563,"millis":0.004,"status":"passed"},"step":{"line":30,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":334300,"startTime":1732283434563,"endTime":1732283434563,"millis":0.3343,"status":"passed"},"step":{"comments":["# Extract the PDF URL from the JSON response"],"line":33,"prefix":"*","index":5,"text":"def pdfUrl = response.result"}},{"result":{"nanos":374500,"startTime":1732283434563,"endTime":1732283434563,"millis":0.3745,"status":"passed"},"step":{"line":34,"prefix":"*","index":6,"text":"karate.log('PDF URL:', pdfUrl)"},"stepLog":"19:20:34.563 PDF URL: https:\/\/drive-tec-dev.s3.amazonaws.com\/new_project-Chain_actuator_D2_L800.pdf?AWSAccessKeyId=AKIAZAWIART4ZFAXXPHK&Expires=1732287035&response-content-disposition=attachment%3B&response-content-type=application%2Fpdf&Signature=LOMTooVS6po6YveV6DqKUKlyvN8%3D \n"},{"result":{"nanos":302400,"startTime":1732283434563,"endTime":1732283434563,"millis":0.3024,"status":"passed"},"step":{"comments":["# Validate the URL format"],"line":37,"prefix":"*","index":7,"text":"match pdfUrl contains 'https:\/\/'"}},{"result":{"nanos":95200,"startTime":1732283434563,"endTime":1732283434563,"millis":0.0952,"status":"passed"},"step":{"line":38,"prefix":"*","index":8,"text":"match pdfUrl contains '.pdf'"}},{"result":{"nanos":10199,"startTime":1732283434563,"endTime":1732283434563,"millis":0.010199,"status":"passed"},"step":{"comments":["# Fetch the PDF from the extracted URL"],"line":41,"prefix":"Given","index":9,"text":"url pdfUrl"}},{"result":{"nanos":1248167100,"startTime":1732283434563,"endTime":1732283435811,"millis":1248.1671,"status":"passed"},"step":{"line":42,"prefix":"When","index":10,"text":"method GET"},"stepLog":"19:20:34.563 request:\n2 > GET https:\/\/drive-tec-dev.s3.amazonaws.com\/new_project-Chain_actuator_D2_L800.pdf?AWSAccessKeyId=AKIAZAWIART4ZFAXXPHK&Expires=1732287035&response-content-disposition=attachment%3B&response-content-type=application%2Fpdf&Signature=LOMTooVS6po6YveV6DqKUKlyvN8%3D\n2 > Host: drive-tec-dev.s3.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n\n\n19:20:35.818 response time in milliseconds: 1253\n2 < 200\n2 < x-amz-id-2: rGfX7Gyeu9w2H6w+NNri5S4eDHzevZBPTssfSfu2LBaoAN9EweRMoYxAND4VA0u\/J2mQ7eqZQJ+lb\/IRQ1h2Fwf2v1hDID8mdFFicQijHcE=\n2 < x-amz-request-id: EDXNK0N5SZHQKDCM\n2 < Date: Fri, 22 Nov 2024 13:50:36 GMT\n2 < Last-Modified: Fri, 22 Nov 2024 13:50:35 GMT\n2 < ETag: \"7bf31ec5f6110ae5751257efdd8a48a4\"\n2 < x-amz-storage-class: STANDARD_IA\n2 < x-amz-server-side-encryption: AES256\n2 < Content-Disposition: attachment;\n2 < Accept-Ranges: bytes\n2 < Content-Type: application\/pdf\n2 < Content-Length: 89917\n2 < Server: AmazonS3\n\n\n"},{"result":{"nanos":10901,"startTime":1732283435821,"endTime":1732283435821,"millis":0.010901,"status":"passed"},"step":{"line":43,"prefix":"Then","index":11,"text":"status 200"}},{"result":{"nanos":3295600,"startTime":1732283435821,"endTime":1732283435824,"millis":3.2956,"status":"passed"},"step":{"comments":["# Validate the content type is PDF"],"line":46,"prefix":"*","index":12,"text":"match responseHeaders['Content-Type'][0] == 'application\/pdf'"}},{"result":{"nanos":990400,"startTime":1732283435821,"endTime":1732283435822,"millis":0.9904,"status":"passed"},"step":{"comments":["# Save the PDF file locally"],"line":49,"prefix":"*","index":13,"text":"def pdfFile = response"}},{"result":{"nanos":8405800,"startTime":1732283435821,"endTime":1732283435829,"millis":8.4058,"status":"passed"},"step":{"line":50,"prefix":"*","index":14,"text":"karate.write(pdfFile, 'output\/downloaded.pdf')"},"stepLog":"19:20:35.831 write to file: target\\output\\downloaded.pdf\n"},{"result":{"nanos":2262501,"startTime":1732283435831,"endTime":1732283435833,"millis":2.262501,"status":"passed"},"step":{"comments":["# Assert the downloaded PDF file size is non-zero"],"line":53,"prefix":"*","index":15,"text":"def pdfSize = pdfFile.length"}},{"result":{"nanos":1010001,"startTime":1732283435831,"endTime":1732283435832,"millis":1.010001,"status":"passed"},"step":{"line":54,"prefix":"*","index":16,"text":"karate.log('PDF File Size:', pdfSize)"},"stepLog":"19:20:35.831 PDF File Size: 89917 \n"},{"result":{"nanos":489700,"startTime":1732283435831,"endTime":1732283435831,"millis":0.4897,"status":"passed"},"step":{"line":55,"prefix":"*","index":17,"text":"assert pdfSize > 0"}}],"line":5,"description":"","durationMillis":5580.030302,"failed":false,"tags":["pdfdownload"],"executorName":"main","name":"Validate PDF is downloadable from API response","startTime":1732283430240,"refId":"[1:5]","endTime":1732283435831,"exampleIndex":-1}],"callDepth":0,"name":"Validate PDF Download","description":"","resultDate":"2024-11-22 07:20:35 pm","durationMillis":5580.030302,"passedCount":1}