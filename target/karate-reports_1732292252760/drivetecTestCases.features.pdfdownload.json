[{"line":1,"elements":[{"start_timestamp":"2024-11-22T13:50:30.240Z","line":5,"name":"Validate PDF is downloadable from API response","description":"","id":"validate-pdf-is-downloadable-from-api-response","type":"scenario","keyword":"Scenario","steps":[{"name":"url apiUrl + '\/api\/Drives\/DownloadPDFNew\/Schuco'","result":{"duration":456200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":7,"doc_string":{"content_type":"","value":"19:20:30.255 karate.env system property was: null \n","line":7}},{"name":"header Content-Type = 'application\/json'","result":{"duration":179900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":8},{"name":"request","result":{"duration":451100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":9,"doc_string":{"content_type":"","value":"[\n  {\"Id\":\"configId\",\"Header\":\"configId\",\"Value\":\"0413f204-c057-427c-9439-44091f1470d0\"},\n  {\"Id\":\"driveId\",\"Header\":\"driveId\",\"Value\":\"8e41b236-ddae-4821-9147-db4ac85f1b97\"},\n  {\"Id\":\"culture\",\"Header\":\"culture\",\"Value\":\"EN-US\"},\n  {\"Id\":\"projectId\",\"Header\":\"projectId\",\"Value\":\"9103b22a-d525-4b79-938c-4e0260bce013\"},\n  {\"Id\":\"range-of-app\",\"Header\":\"Range of application\",\"Value\":\"Façade\"},\n  {\"Id\":\"opening-type\",\"Header\":\"Opening type\",\"Value\":\"Bottom-hung vent\"},\n  {\"Id\":\"opening-direction\",\"Header\":\"Opening direction\",\"Value\":\"Inward\"},\n  {\"Id\":\"how-calc-weight\",\"Header\":\"Vent weight\",\"Value\":\"Weight including glass\"},\n  {\"Id\":\"Chain-Length\",\"Header\":\"Chain- \/ connecting rod handle\",\"Value\":\"100%\"},\n  {\"Id\":\"drive-position\",\"Header\":\"Drive position\",\"Value\":\"Side installation\"},\n  {\"Id\":\"locking-mechanism\",\"Header\":\"Locking mechanism\",\"Value\":\"With\"},\n  {\"Id\":\"voltage\",\"Header\":\"Voltage\",\"Value\":\"24 V\"},\n  {\"Id\":\"drive-type\",\"Header\":\"Drive type\",\"Value\":\"Chain drive\"},\n  {\"Id\":\"type-installation\",\"Header\":\"Type of installation\",\"Value\":\"Pivoting Outer Frame Installation\"},\n  {\"Id\":\"calculation-type-for-ventilation-area\",\"Header\":\"Calculation type for ventilation area\",\"Value\":\"Method under consideration of the reveal\"}\n]","line":9}},{"name":"method POST","result":{"duration":4313190500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":29,"doc_string":{"content_type":"","value":"19:20:30.255 request:\n1 > POST https:\/\/dev-drivetec-apis.schuecodigitalsolutions.com\/api\/Drives\/DownloadPDFNew\/Schuco\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 1201\n1 > Host: dev-drivetec-apis.schuecodigitalsolutions.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n[{\"Id\":\"configId\",\"Header\":\"configId\",\"Value\":\"0413f204-c057-427c-9439-44091f1470d0\"},{\"Id\":\"driveId\",\"Header\":\"driveId\",\"Value\":\"8e41b236-ddae-4821-9147-db4ac85f1b97\"},{\"Id\":\"culture\",\"Header\":\"culture\",\"Value\":\"EN-US\"},{\"Id\":\"projectId\",\"Header\":\"projectId\",\"Value\":\"9103b22a-d525-4b79-938c-4e0260bce013\"},{\"Id\":\"range-of-app\",\"Header\":\"Range of application\",\"Value\":\"Façade\"},{\"Id\":\"opening-type\",\"Header\":\"Opening type\",\"Value\":\"Bottom-hung vent\"},{\"Id\":\"opening-direction\",\"Header\":\"Opening direction\",\"Value\":\"Inward\"},{\"Id\":\"how-calc-weight\",\"Header\":\"Vent weight\",\"Value\":\"Weight including glass\"},{\"Id\":\"Chain-Length\",\"Header\":\"Chain- \\\/ connecting rod handle\",\"Value\":\"100%\"},{\"Id\":\"drive-position\",\"Header\":\"Drive position\",\"Value\":\"Side installation\"},{\"Id\":\"locking-mechanism\",\"Header\":\"Locking mechanism\",\"Value\":\"With\"},{\"Id\":\"voltage\",\"Header\":\"Voltage\",\"Value\":\"24 V\"},{\"Id\":\"drive-type\",\"Header\":\"Drive type\",\"Value\":\"Chain drive\"},{\"Id\":\"type-installation\",\"Header\":\"Type of installation\",\"Value\":\"Pivoting Outer Frame Installation\"},{\"Id\":\"calculation-type-for-ventilation-area\",\"Header\":\"Calculation type for ventilation area\",\"Value\":\"Method under consideration of the reveal\"}]\n\n19:20:34.563 response time in milliseconds: 4308\n1 < 200\n1 < Content-Type: application\/json; charset=utf-8\n1 < Date: Fri, 22 Nov 2024 13:50:35 GMT\n1 < Server: Microsoft-IIS\/10.0\n1 < X-Powered-By: ASP.NET\n1 < Content-Length: 276\n1 < Connection: keep-alive\n{\r\n  \"result\": \"https:\/\/drive-tec-dev.s3.amazonaws.com\/new_project-Chain_actuator_D2_L800.pdf?AWSAccessKeyId=AKIAZAWIART4ZFAXXPHK&Expires=1732287035&response-content-disposition=attachment%3B&response-content-type=application%2Fpdf&Signature=LOMTooVS6po6YveV6DqKUKlyvN8%3D\"\r\n}\n\n","line":29}},{"name":"status 200","result":{"duration":4000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":30},{"name":"def pdfUrl = response.result","result":{"duration":334300,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Extract the PDF URL from the JSON response"],"keyword":"*","line":33},{"name":"karate.log('PDF URL:', pdfUrl)","result":{"duration":374500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":34,"doc_string":{"content_type":"","value":"19:20:34.563 PDF URL: https:\/\/drive-tec-dev.s3.amazonaws.com\/new_project-Chain_actuator_D2_L800.pdf?AWSAccessKeyId=AKIAZAWIART4ZFAXXPHK&Expires=1732287035&response-content-disposition=attachment%3B&response-content-type=application%2Fpdf&Signature=LOMTooVS6po6YveV6DqKUKlyvN8%3D \n","line":34}},{"name":"match pdfUrl contains 'https:\/\/'","result":{"duration":302400,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Validate the URL format"],"keyword":"*","line":37},{"name":"match pdfUrl contains '.pdf'","result":{"duration":95200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":38},{"name":"url pdfUrl","result":{"duration":10199,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Fetch the PDF from the extracted URL"],"keyword":"Given","line":41},{"name":"method GET","result":{"duration":1248167100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":42,"doc_string":{"content_type":"","value":"19:20:34.563 request:\n2 > GET https:\/\/drive-tec-dev.s3.amazonaws.com\/new_project-Chain_actuator_D2_L800.pdf?AWSAccessKeyId=AKIAZAWIART4ZFAXXPHK&Expires=1732287035&response-content-disposition=attachment%3B&response-content-type=application%2Fpdf&Signature=LOMTooVS6po6YveV6DqKUKlyvN8%3D\n2 > Host: drive-tec-dev.s3.amazonaws.com\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n\n\n19:20:35.818 response time in milliseconds: 1253\n2 < 200\n2 < x-amz-id-2: rGfX7Gyeu9w2H6w+NNri5S4eDHzevZBPTssfSfu2LBaoAN9EweRMoYxAND4VA0u\/J2mQ7eqZQJ+lb\/IRQ1h2Fwf2v1hDID8mdFFicQijHcE=\n2 < x-amz-request-id: EDXNK0N5SZHQKDCM\n2 < Date: Fri, 22 Nov 2024 13:50:36 GMT\n2 < Last-Modified: Fri, 22 Nov 2024 13:50:35 GMT\n2 < ETag: \"7bf31ec5f6110ae5751257efdd8a48a4\"\n2 < x-amz-storage-class: STANDARD_IA\n2 < x-amz-server-side-encryption: AES256\n2 < Content-Disposition: attachment;\n2 < Accept-Ranges: bytes\n2 < Content-Type: application\/pdf\n2 < Content-Length: 89917\n2 < Server: AmazonS3\n\n\n","line":42}},{"name":"status 200","result":{"duration":10901,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":43},{"name":"match responseHeaders['Content-Type'][0] == 'application\/pdf'","result":{"duration":3295600,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Validate the content type is PDF"],"keyword":"*","line":46},{"name":"def pdfFile = response","result":{"duration":990400,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Save the PDF file locally"],"keyword":"*","line":49},{"name":"karate.write(pdfFile, 'output\/downloaded.pdf')","result":{"duration":8405800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":50,"doc_string":{"content_type":"","value":"19:20:35.831 write to file: target\\output\\downloaded.pdf\n","line":50}},{"name":"def pdfSize = pdfFile.length","result":{"duration":2262501,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Assert the downloaded PDF file size is non-zero"],"keyword":"*","line":53},{"name":"karate.log('PDF File Size:', pdfSize)","result":{"duration":1010001,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":54,"doc_string":{"content_type":"","value":"19:20:35.831 PDF File Size: 89917 \n","line":54}},{"name":"assert pdfSize > 0","result":{"duration":489700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":55}],"tags":[{"name":"@pdfdownload","line":4}]}],"name":"drivetecTestCases\/features\/pdfdownload.feature","description":"Validate PDF Download","id":"validate-pdf-download","keyword":"Feature","uri":"drivetecTestCases\/features\/pdfdownload.feature"}]